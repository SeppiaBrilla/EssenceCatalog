language ESSENCE' 1.0

given n: int(1..)
find alive_ExplicitVarSizeWithFlags_Flags:
        matrix indexed by [int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))] of bool
find alive_ExplicitVarSizeWithFlags_Values_1:
        matrix indexed by [int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))] of int(1..n +
                                                                                    2)
find alive_ExplicitVarSizeWithFlags_Values_2:
        matrix indexed by [int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))] of int(1..n +
                                                                                    2)
maximising
    sum([alive_ExplicitVarSizeWithFlags_Flags[q7]
             | q7 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))])
such that
    and([!or([alive_ExplicitVarSizeWithFlags_Flags[q9] /\
              (alive_ExplicitVarSizeWithFlags_Values_1[q9] = q24_1 /\
               alive_ExplicitVarSizeWithFlags_Values_2[q9] = q24_2)
                  | q9 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))])
             | q24_1 : int(1..n + 2), q24_2 : int(1..n + 2),
               sum([1   | q12 : int(1..2),
                          or([[1, n + 2; int(1..2)][q15] = [q24_1, q24_2; int(1..2)][q12]
                                  | q15 : int(1..2)])])
               = 0]),
    and([alive_ExplicitVarSizeWithFlags_Flags[q26] ->
         3 <=
         sum([or([alive_ExplicitVarSizeWithFlags_Flags[q17] /\
                  (alive_ExplicitVarSizeWithFlags_Values_1[q17] =
                   alive_ExplicitVarSizeWithFlags_Values_1[q26] + i
                   /\
                   alive_ExplicitVarSizeWithFlags_Values_2[q17] =
                   alive_ExplicitVarSizeWithFlags_Values_2[q26] + j)
                      | q17 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))])
                  | i : int(-1..1), j : int(-1..1)])
         /\
         sum([or([alive_ExplicitVarSizeWithFlags_Flags[q19] /\
                  (alive_ExplicitVarSizeWithFlags_Values_1[q19] =
                   alive_ExplicitVarSizeWithFlags_Values_1[q26] + i
                   /\
                   alive_ExplicitVarSizeWithFlags_Values_2[q19] =
                   alive_ExplicitVarSizeWithFlags_Values_2[q26] + j)
                      | q19 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))])
                  | i : int(-1..1), j : int(-1..1)])
         <= 4
             | q26 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))]),
    and([!or([alive_ExplicitVarSizeWithFlags_Flags[q23] /\
              (alive_ExplicitVarSizeWithFlags_Values_1[q23] = q27_1 /\
               alive_ExplicitVarSizeWithFlags_Values_2[q23] = q27_2)
                  | q23 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))])
         ->
         sum([or([alive_ExplicitVarSizeWithFlags_Flags[q21] /\
                  (alive_ExplicitVarSizeWithFlags_Values_1[q21] = q27_1 + i /\
                   alive_ExplicitVarSizeWithFlags_Values_2[q21] = q27_2 + j)
                      | q21 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))])
                  | i : int(-1..1), j : int(-1..1)])
         != 3
             | q27_1 : int(1..n + 2), q27_2 : int(1..n + 2)]),
    and([alive_ExplicitVarSizeWithFlags_Flags[q1 + 1] ->
         alive_ExplicitVarSizeWithFlags_Values_1[q1] <
         alive_ExplicitVarSizeWithFlags_Values_1[q1 + 1]
         \/
         alive_ExplicitVarSizeWithFlags_Values_1[q1] =
         alive_ExplicitVarSizeWithFlags_Values_1[q1 + 1]
         /\
         alive_ExplicitVarSizeWithFlags_Values_2[q1] <
         alive_ExplicitVarSizeWithFlags_Values_2[q1 + 1]
             | q1 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)) - 1)]),
    and([alive_ExplicitVarSizeWithFlags_Flags[q2] = false ->
         alive_ExplicitVarSizeWithFlags_Values_1[q2] = 1 /\
         alive_ExplicitVarSizeWithFlags_Values_2[q2] = 1
             | q2 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)))]),
    and([alive_ExplicitVarSizeWithFlags_Flags[q3 + 1] ->
         alive_ExplicitVarSizeWithFlags_Flags[q3]
             | q3 : int(1..(1 + (n + 2 - 1)) * (1 + (n + 2 - 1)) - 1)])

