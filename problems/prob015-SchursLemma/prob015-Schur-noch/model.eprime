language ESSENCE' 1.0

given n_balls: int(1..)
given n_boxes: int(1..)
find schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker:
        int(0..2 ** (1 + (n_balls - 1)))
find schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_balls - 1))), int(1..n_balls)] of bool
such that
    and([and([q10 <= schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker ->
              (b1 != b2 /\ b1 + b2 = b3 ->
               !and([schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q10,
                                                                                      [b1, b2, b3; int(1..3)][q16]]
                         | q16 : int(1..3)]))
                  | q10 : int(1..2 ** (1 + (n_balls - 1)))])
             | b1 : int(1..n_balls), b2 : int(1..n_balls), b3 : int(1..n_balls)]),
    and([1 >=
         sum([q11 <= schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker /\
              schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q11, q1]
                  | q11 : int(1..2 ** (1 + (n_balls - 1)))])
             | q1 : int(1..n_balls)]),
    n_boxes =
    sum([(q12 <= schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker) *
         sum([schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q12, q17]
                  | q17 : int(1..n_balls)])
             | q12 : int(1..2 ** (1 + (n_balls - 1)))]),
    and([q13 <= schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker ->
         sum([schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q13, q18]
                  | q18 : int(1..n_balls)])
         >= 1
             | q13 : int(1..2 ** (1 + (n_balls - 1)))]),
    and([q5 + 1 <= schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker ->
         schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q5, ..] <lex
         schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q5 + 1, ..]
             | q5 : int(1..2 ** (1 + (n_balls - 1)) - 1)]),
    and([q6 > schur_PartitionAsSet_ExplicitVarSizeWithMarker_Marker ->
         and([schur_PartitionAsSet_ExplicitVarSizeWithMarker_Values_Occurrence[q6, q19] =
              false
                  | q19 : int(1..n_balls)])
             | q6 : int(1..2 ** (1 + (n_balls - 1)))])

