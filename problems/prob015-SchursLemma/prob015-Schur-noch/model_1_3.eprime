language ESSENCE' 1.0

given n: int(1..)
given k: int(1..)
find boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker:
        matrix indexed by [int(1..k)] of int(0..1 + (n - 1))
find boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values:
        matrix indexed by [int(1..k), int(1..1 + (n - 1))] of int(1..n)
such that
    and([or([x != y /\ x + y = z
                 | x : int(1..n), y : int(1..n), z : int(1..n), nums_Occurrence[x],
                   nums_Occurrence[y], nums_Occurrence[z]])
         ->
         !or([and([or([q15 <=
                       boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q12]
                       /\
                       boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q12, q15] = q13
                           | q15 : int(1..1 + (n - 1))])
                       | q13 : int(1..n), nums_Occurrence[q13]])
                  | q12 : int(1..k)])
             | nums_Occurrence : matrix indexed by [int(1..n)] of bool,
               3 = sum([toInt(nums_Occurrence[q1]) | q1 : int(1..n)])]),
    and([1 =
         sum([toInt(or([q18 <=
                        boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q16]
                        /\
                        boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q16, q18] = q2
                            | q18 : int(1..1 + (n - 1))]))
                  | q16 : int(1..k)])
             | q2 : int(1..n)]),
    and([boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q19] >= 1
             | q19 : int(1..k)]),
    and([boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q5] <
         boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q5 + 1]
         \/
         boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q5] =
         boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q5 + 1]
         /\
         boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q5, ..] <lex
         boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q5 + 1, ..]
             | q5 : int(1..k - 1)]),
    and([and([q7 + 1 <=
              boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q6]
              ->
              boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q6, q7] <
              boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q6, q7 + 1]
                  | q7 : int(1..1 + (n - 1) - 1)])
             | q6 : int(1..k)]),
    and([and([q8 >
              boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Marker[q6]
              -> boxes_PartitionAsSet_ExplicitR5_ExplicitVarSizeWithMarker_Values[q6, q8] = 1
                  | q8 : int(1..1 + (n - 1))])
             | q6 : int(1..k)])

