language ESSENCE' 1.0

given n_roads: int(1..)
find valid_ExplicitVarSizeWithMarkerR9_Marker:
        int(0..2 ** ((1 + (n_roads - 1)) * 8))
find valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1:
        matrix indexed by [int(1..2 ** ((1 + (n_roads - 1)) * 8)),
                           int(1..n_roads)] of int(1..4)
find valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2:
        matrix indexed by [int(1..2 ** ((1 + (n_roads - 1)) * 8)),
                           int(1..n_roads)] of int(1..2)
such that
    and([q34 <= valid_ExplicitVarSizeWithMarkerR9_Marker ->
         and([(valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] = 1 /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd] = 1
               \/
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1] = 1
               /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1] =
               1)
              /\
              (valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] = 3 /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd] = 2
               \/
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1] = 3
               /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1] =
               2)
              /\
              ((1 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] /\
                1 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd]
                \/
                3 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] /\
                2 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd])
               /\
               (1 =
                valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1]
                /\
                1 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1]
                \/
                3 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1]
                /\
                2 =
                valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1]))
              \/
              (valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] = 2 /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd] = 1
               \/
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1] = 2
               /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1] =
               1)
              /\
              (valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] = 4 /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd] = 1
               \/
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1] = 4
               /\
               valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1] =
               1)
              /\
              ((2 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] /\
                1 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd]
                \/
                4 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd] /\
                1 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd])
               /\
               (2 =
                valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1]
                /\
                1 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1]
                \/
                4 = valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q34, rd % n_roads + 1]
                /\
                1 =
                valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q34, rd % n_roads + 1]))
                  | rd : int(1..n_roads)])
             | q34 : int(1..2 ** ((1 + (n_roads - 1)) * 8))]),
    and([q27 + 1 <= valid_ExplicitVarSizeWithMarkerR9_Marker ->
         valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q27, ..] <lex
         valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q27 + 1, ..]
         \/
         and([valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q27, q31] =
              valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q27 + 1, q31]
                  | q31 : int(1..n_roads)])
         /\ and([or([q31 = q32 | q32 : int(1..n_roads)]) | q31 : int(1..n_roads)])
         /\ and([or([q31 = q32 | q32 : int(1..n_roads)]) | q31 : int(1..n_roads)])
         /\
         valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q27, ..] <lex
         valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q27 + 1, ..]
             | q27 : int(1..2 ** ((1 + (n_roads - 1)) * 8) - 1)]),
    and([q28 > valid_ExplicitVarSizeWithMarkerR9_Marker ->
         and([valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_1[q28, q33] = 1 /\
              valid_ExplicitVarSizeWithMarkerR9_Values_Function1D_2[q28, q33] = 1
                  | q33 : int(1..n_roads)])
             | q28 : int(1..2 ** ((1 + (n_roads - 1)) * 8))])

