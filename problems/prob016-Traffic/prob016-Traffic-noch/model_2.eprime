language ESSENCE' 1.0

given n_roads: int(1..)
find valid_ExplicitVarSizeWithFlagsR9_Flags:
        matrix indexed by [int(1..2 ** ((1 + (n_roads - 1)) * 8))] of bool
find valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1:
        matrix indexed by [int(1..2 ** ((1 + (n_roads - 1)) * 8)),
                           int(1..n_roads)] of int(1..4)
find valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2:
        matrix indexed by [int(1..2 ** ((1 + (n_roads - 1)) * 8)),
                           int(1..n_roads)] of int(1..2)
such that
    and([valid_ExplicitVarSizeWithFlagsR9_Flags[q36] ->
         and([(valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] = 1 /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd] = 1
               \/
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1] = 1
               /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1] = 1)
              /\
              (valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] = 3 /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd] = 2
               \/
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1] = 3
               /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1] = 2)
              /\
              ((1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] /\
                1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd]
                \/
                3 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] /\
                2 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd])
               /\
               (1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1]
                /\
                1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1]
                \/
                3 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1]
                /\
                2 =
                valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1]))
              \/
              (valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] = 2 /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd] = 1
               \/
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1] = 2
               /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1] = 1)
              /\
              (valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] = 4 /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd] = 1
               \/
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1] = 4
               /\
               valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1] = 1)
              /\
              ((2 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] /\
                1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd]
                \/
                4 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd] /\
                1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd])
               /\
               (2 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1]
                /\
                1 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1]
                \/
                4 = valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q36, rd % n_roads + 1]
                /\
                1 =
                valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q36, rd % n_roads + 1]))
                  | rd : int(1..n_roads)])
             | q36 : int(1..2 ** ((1 + (n_roads - 1)) * 8))]),
    and([valid_ExplicitVarSizeWithFlagsR9_Flags[q27 + 1] ->
         valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q27, ..] <lex
         valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q27 + 1, ..]
         \/
         and([valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q27, q33] =
              valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q27 + 1, q33]
                  | q33 : int(1..n_roads)])
         /\ and([or([q33 = q34 | q34 : int(1..n_roads)]) | q33 : int(1..n_roads)])
         /\ and([or([q33 = q34 | q34 : int(1..n_roads)]) | q33 : int(1..n_roads)])
         /\
         valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q27, ..] <lex
         valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q27 + 1, ..]
             | q27 : int(1..2 ** ((1 + (n_roads - 1)) * 8) - 1)]),
    and([valid_ExplicitVarSizeWithFlagsR9_Flags[q28] = false ->
         and([valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_1[q28, q35] = 1 /\
              valid_ExplicitVarSizeWithFlagsR9_Values_Function1D_2[q28, q35] = 1
                  | q35 : int(1..n_roads)])
             | q28 : int(1..2 ** ((1 + (n_roads - 1)) * 8))]),
    and([valid_ExplicitVarSizeWithFlagsR9_Flags[q29 + 1] ->
         valid_ExplicitVarSizeWithFlagsR9_Flags[q29]
             | q29 : int(1..2 ** ((1 + (n_roads - 1)) * 8) - 1)])

