language ESSENCE' 1.0

given n_teams: int(1..)
where n_teams % 2 = 0
letting let1 be n_teams - 1
letting let2 be n_teams / 2
letting let3 be (n_teams - 1) * n_teams / 2
find sched_RelationAsSetR3_ExplicitR3_1:
        matrix indexed by [int(1..let3)] of int(1..let1)
find sched_RelationAsSetR3_ExplicitR3_2:
        matrix indexed by [int(1..let3)] of int(1..let2)
find sched_RelationAsSetR3_ExplicitR3_3_Explicit:
        matrix indexed by [int(1..let3), int(1..2)] of int(1..n_teams)
such that
    and([and([or([sched_RelationAsSetR3_ExplicitR3_1[q26] = w /\
                  or([sched_RelationAsSetR3_ExplicitR3_3_Explicit[q26, q27] = t
                          | q27 : int(1..2)])
                      | q26 : int(1..let3)])
                  | w : int(1..let1)])
             | t : int(1..n_teams)]),
    and([and([sum([toInt(sched_RelationAsSetR3_ExplicitR3_2[q8] = p) *
                   toInt(or([sched_RelationAsSetR3_ExplicitR3_3_Explicit[q8, q9] = t
                                 | q9 : int(1..2)]))
                       | q8 : int(1..let3)])
              <= 2
                  | p : int(1..let2)])
             | t : int(1..n_teams)]),
    and([sum([toInt(and([t1 = sched_RelationAsSetR3_ExplicitR3_3_Explicit[q12, q14]
                         \/ t2 = sched_RelationAsSetR3_ExplicitR3_3_Explicit[q12, q14]
                             | q14 : int(1..2)])
                    /\
                    (or([sched_RelationAsSetR3_ExplicitR3_3_Explicit[q12, q20] = t1
                             | q20 : int(1..2)])
                     /\
                     or([sched_RelationAsSetR3_ExplicitR3_3_Explicit[q12, q22] = t2
                             | q22 : int(1..2)])))
                  | q12 : int(1..let3)])
         = 1 | t1 : int(1..n_teams), t2 : int(1..n_teams), t1 != t2]),
    and([sched_RelationAsSetR3_ExplicitR3_1[q1] <
         sched_RelationAsSetR3_ExplicitR3_1[q1 + 1]
         \/
         sched_RelationAsSetR3_ExplicitR3_1[q1] =
         sched_RelationAsSetR3_ExplicitR3_1[q1 + 1]
         /\
         (sched_RelationAsSetR3_ExplicitR3_2[q1] <
          sched_RelationAsSetR3_ExplicitR3_2[q1 + 1]
          \/
          sched_RelationAsSetR3_ExplicitR3_2[q1] =
          sched_RelationAsSetR3_ExplicitR3_2[q1 + 1]
          /\
          sched_RelationAsSetR3_ExplicitR3_3_Explicit[q1, ..] <lex
          sched_RelationAsSetR3_ExplicitR3_3_Explicit[q1 + 1, ..])
             | q1 : int(1..let3 - 1)]),
    and([sched_RelationAsSetR3_ExplicitR3_3_Explicit[q2, 1] <
         sched_RelationAsSetR3_ExplicitR3_3_Explicit[q2, 2]
             | q2 : int(1..let3)])

