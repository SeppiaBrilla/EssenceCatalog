language ESSENCE' 1.0

given n_colours: int(1..)
given n_orders: int(1..)
given col_per_slab: int(1..)
given n_orderSize: int(1..)
given nbSizes: int(1..)
given p1: int
given ordSize_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_orderSize)
given p2: int
given ordCol_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_colours)
find cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker:
        int(0..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))
find cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
                           int(1..n_orders)] of bool
find cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) *
                                  (1 + (nbSizes - 1)))] of int(1..nbSizes)
minimising
    sum([(q68 <=
          cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker)
         * cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2[q68]
             | q68 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
find q2_ExplicitVarSizeWithMarker_Marker: int(0..2 ** (1 + (n_orders - 1)))
find q2_ExplicitVarSizeWithMarker_Values_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1))), int(1..n_orders)] of bool
find q7_ExplicitVarSizeWithMarker_Marker: int(0..2 ** (1 + (n_orders - 1)))
find q7_ExplicitVarSizeWithMarker_Values_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1))), int(1..n_orders)] of bool
find q28_ExplicitVarSizeWithMarker_Marker:
        matrix indexed by [int(1..n_orders)] of int(0..2 ** (1 + (n_orders - 1)))
find q28_ExplicitVarSizeWithMarker_Values_Occurrence:
        matrix indexed by [int(1..n_orders), int(1..2 ** (1 + (n_orders - 1))),
                           int(1..n_orders)] of bool
find q39_ExplicitVarSizeWithMarker_Marker: int(0..2 ** (1 + (n_orders - 1)))
find q39_ExplicitVarSizeWithMarker_Values_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1))), int(1..n_orders)] of bool
find q52_ExplicitVarSizeWithMarker_Marker: int(0..2 ** (1 + (n_orders - 1)))
find q52_ExplicitVarSizeWithMarker_Values_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1))), int(1..n_orders)] of bool
such that
    and([q8 + 1 <= q2_ExplicitVarSizeWithMarker_Marker ->
         q2_ExplicitVarSizeWithMarker_Values_Occurrence[q8, ..] <lex
         q2_ExplicitVarSizeWithMarker_Values_Occurrence[q8 + 1, ..]
             | q8 : int(1..2 ** (1 + (n_orders - 1)) - 1)]),
    and([q8 > q2_ExplicitVarSizeWithMarker_Marker ->
         and([q2_ExplicitVarSizeWithMarker_Values_Occurrence[q8, q69] = false
                  | q69 : int(1..n_orders)])
             | q8 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q5 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         or([q24 <= q2_ExplicitVarSizeWithMarker_Marker /\
             (and([q2_ExplicitVarSizeWithMarker_Values_Occurrence[q24, q23] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q5,
                                                                                                      q23]
                       | q23 : int(1..n_orders)])
              /\
              and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q5,
                                                                                                      q25]
                   -> q2_ExplicitVarSizeWithMarker_Values_Occurrence[q24, q25]
                       | q25 : int(1..n_orders)]))
                 | q24 : int(1..2 ** (1 + (n_orders - 1)))])
             | q5 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q10 <= q2_ExplicitVarSizeWithMarker_Marker ->
         or([q6 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
             /\
             (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q6,
                                                                                                      q26]
                   -> q2_ExplicitVarSizeWithMarker_Values_Occurrence[q10, q26]
                       | q26 : int(1..n_orders)])
              /\
              and([q2_ExplicitVarSizeWithMarker_Values_Occurrence[q10, q27] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q6,
                                                                                                      q27]
                       | q27 : int(1..n_orders)]))
                 | q6 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q10 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q14 + 1 <= q7_ExplicitVarSizeWithMarker_Marker ->
         q7_ExplicitVarSizeWithMarker_Values_Occurrence[q14, ..] <lex
         q7_ExplicitVarSizeWithMarker_Values_Occurrence[q14 + 1, ..]
             | q14 : int(1..2 ** (1 + (n_orders - 1)) - 1)]),
    and([q14 > q7_ExplicitVarSizeWithMarker_Marker ->
         and([q7_ExplicitVarSizeWithMarker_Values_Occurrence[q14, q67] = false
                  | q67 : int(1..n_orders)])
             | q14 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q11 <=
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         or([q19 <= q7_ExplicitVarSizeWithMarker_Marker /\
             (and([q7_ExplicitVarSizeWithMarker_Values_Occurrence[q19, q18] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q11,
                                                                                                      q18]
                       | q18 : int(1..n_orders)])
              /\
              and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q11,
                                                                                                      q20]
                   -> q7_ExplicitVarSizeWithMarker_Values_Occurrence[q19, q20]
                       | q20 : int(1..n_orders)]))
                 | q19 : int(1..2 ** (1 + (n_orders - 1)))])
             | q11 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q16 <= q7_ExplicitVarSizeWithMarker_Marker ->
         or([q12 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
             /\
             (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q12,
                                                                                                      q21]
                   -> q7_ExplicitVarSizeWithMarker_Values_Occurrence[q16, q21]
                       | q21 : int(1..n_orders)])
              /\
              and([q7_ExplicitVarSizeWithMarker_Values_Occurrence[q16, q22] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q12,
                                                                                                      q22]
                       | q22 : int(1..n_orders)]))
                 | q12 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q16 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([and([q9 <= q2_ExplicitVarSizeWithMarker_Marker,
              q15 <= q7_ExplicitVarSizeWithMarker_Marker,
              or([q2_ExplicitVarSizeWithMarker_Values_Occurrence[q9, q17] /\
                  !q7_ExplicitVarSizeWithMarker_Values_Occurrence[q15, q17]
                      | q17 : int(1..n_orders)])
              \/
              or([q7_ExplicitVarSizeWithMarker_Values_Occurrence[q15, q17] /\
                  !q2_ExplicitVarSizeWithMarker_Values_Occurrence[q9, q17]
                      | q17 : int(1..n_orders)]); int(1..3)])
         ->
         sum([q2_ExplicitVarSizeWithMarker_Values_Occurrence[q9, q13] /\
              q7_ExplicitVarSizeWithMarker_Values_Occurrence[q15, q13]
                  | q13 : int(1..n_orders)])
         = 0 | q9 : int(1..2 ** (1 + (n_orders - 1))),
               q15 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([and([q32 + 1 <= q28_ExplicitVarSizeWithMarker_Marker[o] ->
              q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q32, ..] <lex
              q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q32 + 1, ..]
                  | q32 : int(1..2 ** (1 + (n_orders - 1)) - 1)])
             | o : int(1..n_orders)]),
    and([and([q32 > q28_ExplicitVarSizeWithMarker_Marker[o] ->
              and([q28_ExplicitVarSizeWithMarker_Values_Occurrence[q32, q70] = false
                       | q70 : int(1..n_orders)])
                  | q32 : int(1..2 ** (1 + (n_orders - 1)))])
             | o : int(1..n_orders)]),
    and([and([q29 <=
              cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
              ->
              or([q35 <= q28_ExplicitVarSizeWithMarker_Marker[o] /\
                  (and([q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q35, q31] ->
                        cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q29,
                                                                                                           q31]
                            | q31 : int(1..n_orders)])
                   /\
                   and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q29,
                                                                                                           q36]
                        -> q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q35, q36]
                            | q36 : int(1..n_orders)]))
                      | q35 : int(1..2 ** (1 + (n_orders - 1)))])
                  | q29 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | o : int(1..n_orders)]),
    and([and([q34 <= q28_ExplicitVarSizeWithMarker_Marker[o] ->
              or([q30 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
                  /\
                  (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q30,
                                                                                                           q37]
                        -> q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q34, q37]
                            | q37 : int(1..n_orders)])
                   /\
                   and([q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q34, q38] ->
                        cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q30,
                                                                                                           q38]
                            | q38 : int(1..n_orders)]))
                      | q30 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
                  | q34 : int(1..2 ** (1 + (n_orders - 1)))])
             | o : int(1..n_orders)]),
    and([or([q33 <= q28_ExplicitVarSizeWithMarker_Marker[o] /\
             q28_ExplicitVarSizeWithMarker_Values_Occurrence[o, q33, o]
                 | q33 : int(1..2 ** (1 + (n_orders - 1)))])
             | o : int(1..n_orders)]),
    and([q43 + 1 <= q39_ExplicitVarSizeWithMarker_Marker ->
         q39_ExplicitVarSizeWithMarker_Values_Occurrence[q43, ..] <lex
         q39_ExplicitVarSizeWithMarker_Values_Occurrence[q43 + 1, ..]
             | q43 : int(1..2 ** (1 + (n_orders - 1)) - 1)]),
    and([q43 > q39_ExplicitVarSizeWithMarker_Marker ->
         and([q39_ExplicitVarSizeWithMarker_Values_Occurrence[q43, q71] = false
                  | q71 : int(1..n_orders)])
             | q43 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q40 <=
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         or([q48 <= q39_ExplicitVarSizeWithMarker_Marker /\
             (and([q39_ExplicitVarSizeWithMarker_Values_Occurrence[q48, q47] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q40,
                                                                                                      q47]
                       | q47 : int(1..n_orders)])
              /\
              and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q40,
                                                                                                      q49]
                   -> q39_ExplicitVarSizeWithMarker_Values_Occurrence[q48, q49]
                       | q49 : int(1..n_orders)]))
                 | q48 : int(1..2 ** (1 + (n_orders - 1)))])
             | q40 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q45 <= q39_ExplicitVarSizeWithMarker_Marker ->
         or([q41 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
             /\
             (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q41,
                                                                                                      q50]
                   -> q39_ExplicitVarSizeWithMarker_Values_Occurrence[q45, q50]
                       | q50 : int(1..n_orders)])
              /\
              and([q39_ExplicitVarSizeWithMarker_Values_Occurrence[q45, q51] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q41,
                                                                                                      q51]
                       | q51 : int(1..n_orders)]))
                 | q41 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q45 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q44 <= q39_ExplicitVarSizeWithMarker_Marker ->
         or([q4 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
             /\
             (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q4,
                                                                                                      q42]
                   -> q39_ExplicitVarSizeWithMarker_Values_Occurrence[q44, q42]
                       | q42 : int(1..n_orders)])
              /\
              and([q39_ExplicitVarSizeWithMarker_Values_Occurrence[q44, q46] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q4,
                                                                                                      q46]
                       | q46 : int(1..n_orders)])
              /\
              cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2[q4] >=
              sum([q39_ExplicitVarSizeWithMarker_Values_Occurrence[q44, o] *
                   ordSize_Function1D[o]
                       | o : int(1..n_orders)]))
                 | q4 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q44 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q73 <=
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         sum([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q73,
                                                                                                 o]
              * ordSize_Function1D[o]
                  | o : int(1..n_orders)])
         <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2[q73]
             | q73 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q56 + 1 <= q52_ExplicitVarSizeWithMarker_Marker ->
         q52_ExplicitVarSizeWithMarker_Values_Occurrence[q56, ..] <lex
         q52_ExplicitVarSizeWithMarker_Values_Occurrence[q56 + 1, ..]
             | q56 : int(1..2 ** (1 + (n_orders - 1)) - 1)]),
    and([q56 > q52_ExplicitVarSizeWithMarker_Marker ->
         and([q52_ExplicitVarSizeWithMarker_Values_Occurrence[q56, q72] = false
                  | q72 : int(1..n_orders)])
             | q56 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q53 <=
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         or([q59 <= q52_ExplicitVarSizeWithMarker_Marker /\
             (and([q52_ExplicitVarSizeWithMarker_Values_Occurrence[q59, q55] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q53,
                                                                                                      q55]
                       | q55 : int(1..n_orders)])
              /\
              and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q53,
                                                                                                      q60]
                   -> q52_ExplicitVarSizeWithMarker_Values_Occurrence[q59, q60]
                       | q60 : int(1..n_orders)]))
                 | q59 : int(1..2 ** (1 + (n_orders - 1)))])
             | q53 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q58 <= q52_ExplicitVarSizeWithMarker_Marker ->
         or([q54 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
             /\
             (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q54,
                                                                                                      q61]
                   -> q52_ExplicitVarSizeWithMarker_Values_Occurrence[q58, q61]
                       | q61 : int(1..n_orders)])
              /\
              and([q52_ExplicitVarSizeWithMarker_Values_Occurrence[q58, q62] ->
                   cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q54,
                                                                                                      q62]
                       | q62 : int(1..n_orders)]))
                 | q54 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q58 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([q57 <= q52_ExplicitVarSizeWithMarker_Marker ->
         sum([q52_ExplicitVarSizeWithMarker_Values_Occurrence[q57, o] *
              ordCol_Function1D[o]
                  | o : int(1..n_orders)])
         <= col_per_slab
             | q57 : int(1..2 ** (1 + (n_orders - 1)))]),
    and([1 >=
         sum([q3 <= cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
              /\
              (and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q3,
                                                                                                       q63]
                    -> q1_Occurrence[q63]
                        | q63 : int(1..n_orders)])
               /\
               and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q3,
                                                                                                       q64]
                        | q64 : int(1..n_orders), q1_Occurrence[q64]]))
                  | q3 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q1_Occurrence : matrix indexed by [int(1..n_orders)] of bool]),
    and([q1 + 1 <=
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1,
                                                                                            ..]
         <lex
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1
                                                                                            + 1,
                                                                                            ..]
         \/
         and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1,
                                                                                                 q65]
              ->
              cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1
                                                                                                 + 1,
                                                                                                 q65]
                  | q65 : int(1..n_orders)])
         /\
         and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1
                                                                                                 + 1,
                                                                                                 q66]
              ->
              cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1,
                                                                                                 q66]
                  | q66 : int(1..n_orders)])
         /\
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2[q1] <
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2[q1 + 1]
             | q1 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)) - 1)]),
    and([q1 > cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Marker
         ->
         and([cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_1_Occurrence[q1,
                                                                                                 q74]
              = false
                  | q74 : int(1..n_orders)])
         /\
         cut_FunctionAsRelation_RelationAsSet_ExplicitVarSizeWithMarker_Values_2[q1] = 1
             | q1 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])

