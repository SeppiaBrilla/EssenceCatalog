language ESSENCE' 1.0

given n_colours: int(1..)
given n_orders: int(1..)
given col_per_slab: int(1..)
given n_orderSize: int(1..)
given nbSizes: int(1..)
given fin1: int
given ordSize_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_orderSize)
given fin2: int
given ordCol_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_colours)
find cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker:
        int(0..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))
find cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
                           int(1..n_orders)] of bool
find cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) *
                                  (1 + (nbSizes - 1)))] of int(1..nbSizes)
minimising
    sum([toInt(q36 <=
               cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker)
         *
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2[q36]
             | q36 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
such that
    and([and([q28 <=
              cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker,
              q34 <=
              cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker,
              or([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q28,
                                                                                                           q31]
                  /\
                  !or([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q34,
                                                                                                                q32]
                       /\ q32 = q31
                           | q32 : int(1..n_orders)])
                      | q31 : int(1..n_orders)])
              \/
              or([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q34,
                                                                                                           q31]
                  /\
                  !cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q28,
                                                                                                            q31]
                      | q31 : int(1..n_orders)]); int(1..3)])
         ->
         sum([toInt(or([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q34,
                                                                                                                 q30]
                        /\ q30 = q29
                            | q30 : int(1..n_orders)]))
              *
              toInt(cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q28,
                                                                                                             q29])
                  | q29 : int(1..n_orders)])
         = 0 | q28 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
               q34 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([or([q8 <=
             cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
             /\
             cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q8,
                                                                                                      o]
                 | q8 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | o : int(1..n_orders)]),
    and([q22 <=
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
         ->
         or([q17 <=
             cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
             /\
             (and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q17,
                                                                                                            q18]
                   ->
                   or([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q22,
                                                                                                                q19]
                       /\ q19 = q18
                           | q19 : int(1..n_orders)])
                       | q18 : int(1..n_orders)])
              /\
              and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q22,
                                                                                                            q20]
                   ->
                   cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q17,
                                                                                                            q20]
                       | q20 : int(1..n_orders)])
              /\
              cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2[q17]
              >=
              sum([toInt(cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q22,
                                                                                                                  o])
                   * ordSize_Function1D[o]
                       | o : int(1..n_orders)]))
                 | q17 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q22 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q24 <=
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
         ->
         sum([toInt(cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q24,
                                                                                                             o])
              * ordSize_Function1D[o]
                  | o : int(1..n_orders)])
         <=
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2[q24]
             | q24 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q26 <=
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
         ->
         sum([toInt(cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q26,
                                                                                                             o])
              * ordCol_Function1D[o]
                  | o : int(1..n_orders)])
         <= col_per_slab
             | q26 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q1 + 1 <=
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
         ->
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q1,
                                                                                                  ..]
         <lex
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q1
                                                                                                  + 1,
                                                                                                  ..]
         \/
         and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q1,
                                                                                                       q9]
              ->
              cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q1
                                                                                                       + 1,
                                                                                                       q9]
                  | q9 : int(1..n_orders)])
         /\
         and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q1
                                                                                                       + 1,
                                                                                                       q10]
              ->
              cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q1,
                                                                                                       q10]
                  | q10 : int(1..n_orders)])
         /\
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2[q1]
         <
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2[q1
                                                                                       + 1]
             | q1 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)) - 1)]),
    and([q2 >
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
         ->
         and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q2,
                                                                                                       q11]
              = false
                  | q11 : int(1..n_orders)])
         /\
         cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_2[q2]
         = 1 | q2 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([1 >=
         sum([toInt(q13 <=
                    cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Marker
                    /\
                    (and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q13,
                                                                                                                   q14]
                          -> q5_Occurrence[q14]
                              | q14 : int(1..n_orders)])
                     /\
                     and([cut_FunctionAsRelationR2_RelationAsSetR2_ExplicitVarSizeWithMarkerR2_Values_1_Occurrence[q13,
                                                                                                                   q15]
                              | q15 : int(1..n_orders), q5_Occurrence[q15]])))
                  | q13 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q5_Occurrence : matrix indexed by [int(1..n_orders)] of bool])

