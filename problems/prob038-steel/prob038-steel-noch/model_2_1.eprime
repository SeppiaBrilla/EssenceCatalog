language ESSENCE' 1.0

given n_colours: int(1..)
given n_orders: int(1..)
given col_per_slab: int(1..)
given n_orderSize: int(1..)
given nbSizes: int(1..)
given fin1: int
given ordSize_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_orderSize)
given fin2: int
given ordCol_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_colours)
find cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker:
        int(0..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))
find cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
                           int(1..1 + (n_orders - 1))] of int(1..n_orders + 1)
find cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) *
                                  (1 + (nbSizes - 1)))] of int(1..nbSizes)
minimising
    sum([toInt(q65 <=
               cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker)
         *
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2[q65]
             | q65 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
such that
    and([and([q50 <=
              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker,
              q60 <=
              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker,
              or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q50,
                                                                                                                         q55]
                  != n_orders + 1
                  /\
                  !or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q60,
                                                                                                                              q62]
                       != n_orders + 1
                       /\
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q60,
                                                                                                                              q62]
                       =
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q50,
                                                                                                                              q55]
                           | q62 : int(1..1 + (n_orders - 1))])
                      | q55 : int(1..1 + (n_orders - 1))])
              \/
              or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q60,
                                                                                                                         q63]
                  != n_orders + 1
                  /\
                  !or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q50,
                                                                                                                              q58]
                       != n_orders + 1
                       /\
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q50,
                                                                                                                              q58]
                       =
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q60,
                                                                                                                              q63]
                           | q58 : int(1..1 + (n_orders - 1))])
                      | q63 : int(1..1 + (n_orders - 1))]); int(1..3)])
         ->
         sum([toInt(cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q50,
                                                                                                                           q52]
                    != n_orders + 1
                    /\
                    or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q60,
                                                                                                                               q61]
                        != n_orders + 1
                        /\
                        cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q60,
                                                                                                                               q61]
                        =
                        cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q50,
                                                                                                                               q52]
                            | q61 : int(1..1 + (n_orders - 1))]))
                  | q52 : int(1..1 + (n_orders - 1))])
         = 0 | q50 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
               q60 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([or([q11 <=
             cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
             /\
             or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q11,
                                                                                                                        q13]
                 != n_orders + 1
                 /\
                 cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q11,
                                                                                                                        q13]
                 = o | q13 : int(1..1 + (n_orders - 1))])
                 | q11 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | o : int(1..n_orders)]),
    and([q39 <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         or([q31 <=
             cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
             /\
             (and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q31,
                                                                                                                          q33]
                   != n_orders + 1
                   ->
                   or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q39,
                                                                                                                              q40]
                       != n_orders + 1
                       /\
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q39,
                                                                                                                              q40]
                       =
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q31,
                                                                                                                              q33]
                           | q40 : int(1..1 + (n_orders - 1))])
                       | q33 : int(1..1 + (n_orders - 1))])
              /\
              and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q39,
                                                                                                                          q41]
                   != n_orders + 1
                   ->
                   or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q31,
                                                                                                                              q37]
                       != n_orders + 1
                       /\
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q31,
                                                                                                                              q37]
                       =
                       cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q39,
                                                                                                                              q41]
                           | q37 : int(1..1 + (n_orders - 1))])
                       | q41 : int(1..1 + (n_orders - 1))])
              /\
              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2[q31]
              >=
              sum([toInt(cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q39,
                                                                                                                                q42]
                         != n_orders + 1)
                   *
                   ordSize_Function1D[cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q39,
                                                                                                                                             q42]]
                       | q42 : int(1..1 + (n_orders - 1))]))
                 | q31 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q39 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q44 <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         sum([toInt(cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q44,
                                                                                                                           q45]
                    != n_orders + 1)
              *
              ordSize_Function1D[cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q44,
                                                                                                                                        q45]]
                  | q45 : int(1..1 + (n_orders - 1))])
         <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2[q44]
             | q44 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q47 <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         sum([toInt(cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q47,
                                                                                                                           q48]
                    != n_orders + 1)
              *
              ordCol_Function1D[cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q47,
                                                                                                                                       q48]]
                  | q48 : int(1..1 + (n_orders - 1))])
         <= col_per_slab
             | q47 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q1 + 1 <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1,
                                                                                                                ..]
         <lex
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1
                                                                                                                + 1,
                                                                                                                ..]
         \/
         and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1,
                                                                                                                     q15]
              != n_orders + 1
              ->
              or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1
                                                                                                                         +
                                                                                                                         1,
                                                                                                                         q17]
                  != n_orders + 1
                  /\
                  cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1
                                                                                                                         +
                                                                                                                         1,
                                                                                                                         q17]
                  =
                  cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1,
                                                                                                                         q15]
                      | q17 : int(1..1 + (n_orders - 1))])
                  | q15 : int(1..1 + (n_orders - 1))])
         /\
         and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1
                                                                                                                     +
                                                                                                                     1,
                                                                                                                     q19]
              != n_orders + 1
              ->
              or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1,
                                                                                                                         q21]
                  != n_orders + 1
                  /\
                  cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1,
                                                                                                                         q21]
                  =
                  cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q1
                                                                                                                         +
                                                                                                                         1,
                                                                                                                         q19]
                      | q21 : int(1..1 + (n_orders - 1))])
                  | q19 : int(1..1 + (n_orders - 1))])
         /\
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2[q1]
         <
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2[q1
                                                                                       + 1]
             | q1 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)) - 1)]),
    and([q2 >
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q2,
                                                                                                                     q22]
              = 1 | q22 : int(1..1 + (n_orders - 1))])
         /\
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_2[q2]
         = 1 | q2 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q3 <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q3,
                                                                                                                     q4]
              <
              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q3,
                                                                                                                     q4
                                                                                                                     +
                                                                                                                     1]
              \/
              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q3,
                                                                                                                     q4]
              = n_orders + 1
                  | q4 : int(1..1 + (n_orders - 1) - 1)])
             | q3 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q3 <=
         cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
         ->
         and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q3,
                                                                                                                     q5]
              = n_orders + 1
              ->
              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q3,
                                                                                                                     q5
                                                                                                                     +
                                                                                                                     1]
              = n_orders + 1
                  | q5 : int(1..1 + (n_orders - 1) - 1)])
             | q3 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([1 >=
         sum([toInt(q24 <=
                    cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Marker
                    /\
                    (and([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q24,
                                                                                                                                 q26]
                          != n_orders + 1
                          ->
                          q8_Occurrence[cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q24,
                                                                                                                                               q26]]
                              | q26 : int(1..1 + (n_orders - 1))])
                     /\
                     and([or([cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q24,
                                                                                                                                     q29]
                              != n_orders + 1
                              /\
                              cut_FunctionAsRelationR6_RelationAsSetR6_ExplicitVarSizeWithMarkerR6_Values_1_ExplicitVarSizeWithDummy[q24,
                                                                                                                                     q29]
                              = q27
                                  | q29 : int(1..1 + (n_orders - 1))])
                              | q27 : int(1..n_orders), q8_Occurrence[q27]])))
                  | q24 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q8_Occurrence : matrix indexed by [int(1..n_orders)] of bool])

