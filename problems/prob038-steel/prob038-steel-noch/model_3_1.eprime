language ESSENCE' 1.0

given n_colours: int(1..)
given n_orders: int(1..)
given col_per_slab: int(1..)
given n_orderSize: int(1..)
given nbSizes: int(1..)
given fin1: int
given ordSize_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_orderSize)
given fin2: int
given ordCol_Function1D:
        matrix indexed by [int(1..n_orders)] of int(1..n_colours)
find cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker:
        int(0..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))
find cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) *
                                  (1 + (nbSizes - 1)))] of int(0..1 + (n_orders - 1))
find cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
                           int(1..1 + (n_orders - 1))] of int(1..n_orders)
find cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2:
        matrix indexed by [int(1..2 ** (1 + (n_orders - 1)) *
                                  (1 + (nbSizes - 1)))] of int(1..nbSizes)
minimising
    sum([toInt(q64 <=
               cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker)
         *
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2[q64]
             | q64 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
such that
    and([and([q49 <=
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker,
              q59 <=
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker,
              or([q54 <=
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q49]
                  /\
                  !or([q61 <=
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q59]
                       /\
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q59,
                                                                                                                                      q61]
                       =
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q49,
                                                                                                                                      q54]
                           | q61 : int(1..1 + (n_orders - 1))])
                      | q54 : int(1..1 + (n_orders - 1))])
              \/
              or([q62 <=
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q59]
                  /\
                  !or([q57 <=
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q49]
                       /\
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q49,
                                                                                                                                      q57]
                       =
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q59,
                                                                                                                                      q62]
                           | q57 : int(1..1 + (n_orders - 1))])
                      | q62 : int(1..1 + (n_orders - 1))]); int(1..3)])
         ->
         sum([toInt(q51 <=
                    cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q49]
                    /\
                    or([q60 <=
                        cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q59]
                        /\
                        cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q59,
                                                                                                                                       q60]
                        =
                        cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q49,
                                                                                                                                       q51]
                            | q60 : int(1..1 + (n_orders - 1))]))
                  | q51 : int(1..1 + (n_orders - 1))])
         = 0 | q49 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1))),
               q59 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([or([q10 <=
             cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
             /\
             or([q12 <=
                 cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q10]
                 /\
                 cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q10,
                                                                                                                                q12]
                 = o | q12 : int(1..1 + (n_orders - 1))])
                 | q10 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | o : int(1..n_orders)]),
    and([q38 <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         or([q30 <=
             cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
             /\
             (and([q32 <=
                   cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q30]
                   ->
                   or([q39 <=
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q38]
                       /\
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q38,
                                                                                                                                      q39]
                       =
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q30,
                                                                                                                                      q32]
                           | q39 : int(1..1 + (n_orders - 1))])
                       | q32 : int(1..1 + (n_orders - 1))])
              /\
              and([q40 <=
                   cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q38]
                   ->
                   or([q36 <=
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q30]
                       /\
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q30,
                                                                                                                                      q36]
                       =
                       cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q38,
                                                                                                                                      q40]
                           | q36 : int(1..1 + (n_orders - 1))])
                       | q40 : int(1..1 + (n_orders - 1))])
              /\
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2[q30]
              >=
              sum([toInt(q41 <=
                         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q38])
                   *
                   ordSize_Function1D[cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q38,
                                                                                                                                                     q41]]
                       | q41 : int(1..1 + (n_orders - 1))]))
                 | q30 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q38 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q43 <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         sum([toInt(q44 <=
                    cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q43])
              *
              ordSize_Function1D[cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q43,
                                                                                                                                                q44]]
                  | q44 : int(1..1 + (n_orders - 1))])
         <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2[q43]
             | q43 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q46 <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         sum([toInt(q47 <=
                    cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q46])
              *
              ordCol_Function1D[cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q46,
                                                                                                                                               q47]]
                  | q47 : int(1..1 + (n_orders - 1))])
         <= col_per_slab
             | q46 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q1 + 1 <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1]
         <
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1
                                                                                                                        +
                                                                                                                        1]
         \/
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1]
         =
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1
                                                                                                                        +
                                                                                                                        1]
         /\
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q1,
                                                                                                                        ..]
         <lex
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q1
                                                                                                                        +
                                                                                                                        1,
                                                                                                                        ..]
         \/
         and([q14 <=
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1]
              ->
              or([q16 <=
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1
                                                                                                                                 +
                                                                                                                                 1]
                  /\
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q1
                                                                                                                                 +
                                                                                                                                 1,
                                                                                                                                 q16]
                  =
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q1,
                                                                                                                                 q14]
                      | q16 : int(1..1 + (n_orders - 1))])
                  | q14 : int(1..1 + (n_orders - 1))])
         /\
         and([q18 <=
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1
                                                                                                                             +
                                                                                                                             1]
              ->
              or([q20 <=
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q1]
                  /\
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q1,
                                                                                                                                 q20]
                  =
                  cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q1
                                                                                                                                 +
                                                                                                                                 1,
                                                                                                                                 q18]
                      | q20 : int(1..1 + (n_orders - 1))])
                  | q18 : int(1..1 + (n_orders - 1))])
         /\
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2[q1]
         <
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2[q1
                                                                                       + 1]
             | q1 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)) - 1)]),
    and([q2 >
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q2]
         = 0
         /\
         and([cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q2,
                                                                                                                             q21]
              = 1 | q21 : int(1..1 + (n_orders - 1))])
         /\
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_2[q2]
         = 1 | q2 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q3 <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         and([q4 + 1 <=
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q3]
              ->
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q3,
                                                                                                                             q4]
              <
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q3,
                                                                                                                             q4
                                                                                                                             +
                                                                                                                             1]
                  | q4 : int(1..1 + (n_orders - 1) - 1)])
             | q3 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([q3 <=
         cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
         ->
         and([q5 >
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q3]
              ->
              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q3,
                                                                                                                             q5]
              = 1 | q5 : int(1..1 + (n_orders - 1))])
             | q3 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))]),
    and([1 >=
         sum([toInt(q23 <=
                    cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Marker
                    /\
                    (and([q25 <=
                          cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q23]
                          ->
                          q7_Occurrence[cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q23,
                                                                                                                                                       q25]]
                              | q25 : int(1..1 + (n_orders - 1))])
                     /\
                     and([or([q28 <=
                              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Marker[q23]
                              /\
                              cut_FunctionAsRelationR5_RelationAsSetR5_ExplicitVarSizeWithMarkerR5_Values_1_ExplicitVarSizeWithMarker_Values[q23,
                                                                                                                                             q28]
                              = q26
                                  | q28 : int(1..1 + (n_orders - 1))])
                              | q26 : int(1..n_orders), q7_Occurrence[q26]])))
                  | q23 : int(1..2 ** (1 + (n_orders - 1)) * (1 + (nbSizes - 1)))])
             | q7_Occurrence : matrix indexed by [int(1..n_orders)] of bool])

