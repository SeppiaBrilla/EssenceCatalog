language ESSENCE' 1.0

given n: int(1..100)
given totalWeight: int(1..1000)
given weights_Function1DPartial_Flags: matrix indexed by [int(1..n)] of bool
given weights_Function1DPartial_Values:
        matrix indexed by [int(1..n)] of int(1..100)
given values_Function1DPartial_Flags: matrix indexed by [int(1..n)] of bool
given values_Function1DPartial_Values:
        matrix indexed by [int(1..n)] of int(1..100)
find picked_ExplicitVarSizeWithMarker_Marker: int(0..n)
find picked_ExplicitVarSizeWithMarker_Values:
        matrix indexed by [int(1..n)] of int(1..n)
maximising
    sum([(q2 <= picked_ExplicitVarSizeWithMarker_Marker) *
         values_Function1DPartial_Values[picked_ExplicitVarSizeWithMarker_Values[q2]]
             | q2 : int(1..n)])
such that
    and([q2 <= picked_ExplicitVarSizeWithMarker_Marker ->
         values_Function1DPartial_Flags[picked_ExplicitVarSizeWithMarker_Values[q2]]
             | q2 : int(1..n)]),
    sum([(q3 <= picked_ExplicitVarSizeWithMarker_Marker) *
         weights_Function1DPartial_Values[picked_ExplicitVarSizeWithMarker_Values[q3]]
             | q3 : int(1..n)])
    <= totalWeight,
    and([q3 <= picked_ExplicitVarSizeWithMarker_Marker ->
         weights_Function1DPartial_Flags[picked_ExplicitVarSizeWithMarker_Values[q3]]
             | q3 : int(1..n)]),
    and([q1 + 1 <= picked_ExplicitVarSizeWithMarker_Marker ->
         picked_ExplicitVarSizeWithMarker_Values[q1] <
         picked_ExplicitVarSizeWithMarker_Values[q1 + 1]
             | q1 : int(1..n - 1)]),
    and([q1 > picked_ExplicitVarSizeWithMarker_Marker ->
         picked_ExplicitVarSizeWithMarker_Values[q1] = 1
             | q1 : int(1..n)]),
    1 <= picked_ExplicitVarSizeWithMarker_Marker,
    picked_ExplicitVarSizeWithMarker_Marker <= n

